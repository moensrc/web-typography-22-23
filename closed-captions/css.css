/**********************/
/*******DEFAULTS*******/
/**********************/
/* Layout */
body {
	display: grid;
	justify-content: center;
	height: 100vh;
	margin: 0;

	background-color: black;
}

#video-container {
	position: relative;
	margin: auto;
}

#video-mask {
	aspect-ratio: 240.5/100;
	display: grid;
	overflow: hidden;
	align-content: center;
	transition: 1s;
}

iframe {
	width: 80vw;
	height: 53.33333333vw;
	margin-top: -0.35vw;
}

/* Basic p mechanics */
#closed-captions p {
	opacity: 0;
	transition: .05s;
	position: absolute;
	margin: 1em;
	bottom: 0;
}

#closed-captions .on {
	opacity: 1;
}

#closed-captions .off {
	transition: .2s;
	opacity: 0;
}

/* Voice specific styling */
.voice1 {
	font-family: "Brenner Mono";
	font-size: 1.25em;
	font-style: normal;
	font-weight: 400;
	color: greenyellow;
	background-color: black;

	left: 0;
}

.voice2 {
	font-family: "Brenner Sans";
	font-style: normal;
	font-weight: 800;
	font-size: 1.2em;
	color: black;

	right: 0;
}

#closed-captions p.voice3 {
	font-family: "Brenner Sans";
	font-style: normal;
	font-weight: 400;	
	font-size: 20px;
	color: red;
	text-shadow: 0 0 5px black;
	text-transform: uppercase;

	width: 80vw;
	margin: 0 0 32vh 0;
	text-align: center;
}

/* When scene is dark, textcolor is white */
.p1.voice2, 
.p3.voice2, 
.p4.voice2, 
.p5.voice2, 
.p7.voice2 {
	color:white;
}

/**********************/
/********TEXTS*********/
/**********************/

/* Animation keeps selected p or span in place for longer after it is done being said in the video. */
@keyframes staying-text {
	0% {
		opacity: 1;
	}
	90% {
		opacity: 1;
	}
	100% {
		opacity: 0;
	}
}

.p0 span {
	opacity: 0;
}

/* Spans for KD6-3.7 */
.p0.on span:nth-of-type(2),
.p0.on span:nth-of-type(3),
.p0.on span:nth-of-type(4),
.p0.on span:nth-of-type(5),
.p0.on span:nth-of-type(6),
.p0.on span:nth-of-type(7),
.p0.on span:nth-of-type(8) {
	font-weight: 800;
}

/* Words of codename in p0 appear 1 by 1 */
.p0.on span:first-of-type {
	opacity: 1;
	transition: 0s;
}

.p0.on span:nth-of-type(2) {
	opacity: 1;
	transition: 0s .4s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(3) {
	opacity: 1;
	transition: 0s .5s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(4) {
	opacity: 1;
	transition: 0s .7s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(5) {
	opacity: 1;
	transition: 0s 1.1s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(6) {
	opacity: 1;
	transition: 0s 1.4s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(7) {
	opacity: 1;
	transition: 0s 1.7s;
	margin-right: -.25em;
}

.p0.on span:nth-of-type(8) {
	opacity: 1;
	transition: 0s 2s;
}

.p0.on span:nth-of-type(9),
.p0.on span:nth-of-type(10),
.p0.on span:nth-of-type(11) {
	opacity: 1;
	transition: 0s 3s;
}

.p6 span:nth-of-type(3) {
	font-weight: 800;
}

/* Textlines from voice1 that need emphasis in cells-scene */
.p8,
.p11,
.p14,
.p17,
.p19,
.p22,
.p25,
.p28,
.p30,
.p33,
.p36,
.p38 {
	transform: translateY(-5em);
	font-size: 2.5em;
}

/* Textlines from voice1 that need emphasis in cells-scene */
.p8.off,
.p11.off,
.p14.off,
.p17.off,
.p19.off,
.p22.off,
.p25.off,
.p28.off,
.p30.off,
.p33.off,
.p36.off,
.p38.off {
	animation: staying-text 1.02s ease;
}

/* Textlines from voice2 that need emphasis in cells-scene */
.p9,
.p12,
.p15,
.p18,
.p20,
.p23,
.p26,
.p29,
.p31,
.p34,
.p37,
.p39 {
	right: unset;
	left: 0;
	font-size: 2.5em;
	transform: translateY(-3.5em);
}

.p9.on {
	opacity: 1;
	transition: 0s 0.3s;
}

/* Questions in baseline test */
.p10,
.p13,
.p16,
.p21,
.p24,
.p27,
.p30,
.p32,
.p35,
.p40 {
	width: 400px;
	word-break: break-word;
}

/* Repeating line x3 "Within cells interlinked" */
.p41.on,
.p42.on {
	left: 0
}

/* Line 1 "Within cells interlinked" */
.p41.on {
	animation: staying-text 3.4s ease;
}

/* Line 2 "Within cells interlinked" */
.p42.on {
	transform: translateY(-1.75em);
}

/* Line 3 "Within cells interlinked" */
.p43 {
	right: 0;
	margin: 0;

	/* text-align: center; */
	font-size: 30px;
	color: greenyellow;
}


.p43 span {
	opacity: 0;
}

/* Last Words "Within cells interlinked" appear 1 by 1 */
.p43.on span:first-of-type {
	opacity: 1;
	transition: 0s;
}

.p43.on span:nth-of-type(2) {
	opacity: 1;
	transition: .1s ease-out .4s;
}

.p43.on span:nth-of-type(3) {
	opacity: 1;
	transition: .1s ease-out .6s;
}

/**********************/
/*******SOUNDS*********/
/**********************/

/* SOUND 0 */
.sound0 #video-container {
	animation: sound-0-shake 1s forwards ease-in-out;
}

@keyframes sound-0-shake {
	0% {
		transform: scale(1);
	}
	10% {
		transform: scale(0.6);
	}

	100% {
		transform: scale(1);
	}
}

/* SOUND 1 */
.sound1 #video-container {
	animation: siren-1-movement 1.2s;
}

body.sound1  {
	animation: siren-1-background 1.2s;
}

@keyframes siren-1-movement {
	0% {
		transform: scale(1) rotate(0);
	}
	10% {
		transform: scale(1.08) rotate(-.5deg);
	}
	20% {
		transform: scale(1.1) rotate(.5deg);
	}
	30% {
		transform: scale(1.08) rotate(-.5deg);
	}
	40% {
		transform: scale(1.1) rotate(.5deg);
	}
	50% {
		transform: scale(1.08) rotate(-.5deg);
	}
	60% {
		transform: scale(1.1) rotate(.5deg);
	}
	80% {
		transform: scale(1) rotate(0);
	}
	100% {
		transform: scale(1) rotate(0);
	}
}

@keyframes siren-1-background {
	0% {
		background-color: black;
	}
	10% {
		background-color: darkred;	
	}
	20% {
		background-color: red;	
	}
	30% {
		background-color: darkred;	
	}
	40% {
		background-color: red;	
	}
	50% {
		background-color: darkred;
	}
	60% {
		background-color: red;	
	}
	80% {
		background-color: darkred;
	}
	100% {
		background-color: black;
	}
}

/* SOUND 2 */
/* body.sound2 {

} */

/* SOUND 3,5,7 & 4,6,8 */
/* Inspired by codepen: https://codepen.io/P1N2O/pen/pyBNzX */
body.sound3 {
	background: linear-gradient(-45deg, greenyellow, black);
	animation: sound-3-gradient 1.5s ease-in forwards;
	background-size: 400% 400%;
}

body.sound4 {
	background: revert;
	animation: sound-4-flash 1s forwards;
}

body.sound5 {
	background: linear-gradient(-45deg, greenyellow, black);
	animation: sound-5-gradient 1.5s ease-in forwards;
	background-size: 400% 400%;
}

body.sound6 {
	background: revert;
	animation: sound-6-flash 1s forwards;
}

body.sound7 {
	background: linear-gradient(-45deg, greenyellow, black);
	animation: sound-7-gradient 1.5s ease-in forwards;
	background-size: 400% 400%;
}

body.sound8 {
	background: revert;
	animation: sound-8-flash 1s forwards;
}

@keyframes sound-3-gradient {
	0% {
		background-position: 0% 20%;
	}
	90% {
		background-position: 100% 100%;
	}
	100% {
		background-position: 80% 80%;
	}
}

@keyframes sound-5-gradient {
	0% {
		background-position: 0% 20%;
	}
	90% {
		background-position: 100% 100%;
	}
	100% {
		background-position: 80% 80%;
	}
}

@keyframes sound-7-gradient {
	0% {
		background-position: 0% 20%;
	}
	90% {
		background-position: 100% 100%;
	}
	100% {
		background-position: 80% 80%;
	}
}

@keyframes sound-4-flash {
	0% {
		background-color: black;
	}
	20% {
		background-color: greenyellow;
	}
	80% {
		background-color: greenyellow;
	}
	100% {
		background-color: black;
	}
}

@keyframes sound-6-flash {
	0% {
		background-color: black;
	}
	20% {
		background-color: greenyellow;
	}
	80% {
		background-color: greenyellow;
	}
	100% {
		background-color: black;
	}
}

@keyframes sound-8-flash {
	0% {
		background-color: black;
	}
	20% {
		background-color: greenyellow;
	}
	80% {
		background-color: greenyellow;
	}
	100% {
		background-color: black;
	}
}

/* SOUND 9 */
/* Animation inspired by https://codepen.io/web_designer_sanchit/pen/aaVPzq */
/* Overlay in HTML section with bg glitch image */
body section#overlay {
	opacity: 0;
	position:absolute;
	width: 100vw;
	height: 100vh;

	background: url(../noise.jpg);
	background-size: 100%;

	mix-blend-mode: hard-light;
}

/* Duplicate of image in before pseudoelement for glitch animation */
section#overlay:before{
	content:'';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;

	background: url(../noise.jpg);
	background-size: 100%;

	opacity: .5;
	mix-blend-mode: hard-light;
}

/* Stacking increasingly annoying animations with animation delays */
body.sound9 section#overlay {
	z-index: 5;
	/* mix-blend-mode: multiply; */

	animation: sound-9-glitch1 1s 10 2s,
	sound-9-glitch2 .7s 18 12s,
	sound-9-glitch3 .5s 16 24.6s,
	sound-9-glitch4 .3s 22 32.6s,
	increase-opacity 40s ease-out 1;
}

body.sound9 #video-container {
	animation: increase-frame-size 40s ease 1;
}

@keyframes increase-opacity {
	0% {
		opacity: 0;
	}
	100% {
		opacity: .6;
	}
}

@keyframes increase-frame-size {
	0% {
		transform: scale(1);
	}
	100% {
		transform: scale(1.1);
	}
}

@keyframes sound-9-glitch1 {
	0% {
		background-position: 0 0;
		filter:hue-rotate(0deg);
	}
	10% {
		background-position: 5px 0;
	}
	20% {
		background-position: -5px 0;
	}
	30% {
		background-position: 15px 0;
	}
	40% {
		background-position: 5px 0;
	}
	50% {
		background-position: -25px 0;
	}
	60% {
		background-position: -50px 0;
	}
	70% {
		background-position: 0 -20px;
	}
	80% {
		background-position: -60px -20px;
	}
	81% {
		background-position: 0 0;
	}
	100% {
		background-position: 0 0;
		filter:hue-rotate(360deg);
	}
}

@keyframes sound-9-glitch2 {
	0% {
		background-position: 0 0;
		filter:hue-rotate(0deg);
	}
	10% {
		background-position: 5px 0;
	}
	20% {
		background-position: -25px 0;
	}
	30% {
		background-position: 15px 0;
	}
	40% {
		background-position: 5px 0;
	}
	50% {
		background-position: -5px 0;
	}
	60% {
		background-position: -20px -50px;
	}
	70% {
		background-position: 0 -20px;
	}
	80% {
		background-position: -60px -20px;
	}
	81% {
		background-position: 0 0;
	}
	100% {
		background-position: 0 0;
		filter:hue-rotate(360deg);
	}
}

@keyframes sound-9-glitch3 {
	0% {
		background-position: 0 0;
		filter:hue-rotate(0deg);
	}
	10% {
		background-position: 10px 0;
	}
	20% {
		background-position: -25px -50px;
	}
	30% {
		background-position: 15px 15px;
	}
	40% {
		background-position: 5px 0;
	}
	50% {
		background-position: 0 -5px;
	}
	60% {
		background-position: -20px -60px;
	}
	70% {
		background-position: 10px -20px;
	}
	80% {
		background-position: -60px -5px;
	}
	81% {
		background-position: 0 0;
	}
	100% {
		background-position: 0 0;
		filter:hue-rotate(360deg);
	}
}

@keyframes sound-9-glitch4 {
	0% {
		background-position: 0 0;
		filter:hue-rotate(0deg);
	}
	10% {
		background-position: 100px 0;
	}
	20% {
		background-position: -50px -60px;
	}
	30% {
		background-position: -80px 15px;
	}
	40% {
		background-position: 25px 0;
	}
	50% {
		background-position: 0 -60px;
	}
	60% {
		background-position: 30px -20px;
	}
	70% {
		background-position: 100px -20px;
	}
	80% {
		background-position: -60px -10px;
	}
	81% {
		background-position: 0 0;
	}
	100% {
		background-position: 0 0;
		filter:hue-rotate(360deg);
	}
}



